<%- include("../layouts/header")%>
<style>
    .btn-pagination {
  display: inline-block;
  padding: 8px 16px;
  background-color: #01060b;
  color: #fff;
  text-decoration: none;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin: 2px;
}

.btn-pagination.current-page {
  background-color: #ccc;
  color: #333;
}
</style>
<!-- Breadcrumb Begin -->
<div class="breadcrumb-option">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb__links">
                    <a href="./index.html"><i class="fa fa-home"></i> Home</a>
                    <span>Shopping cart</span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Breadcrumb End -->

<!-- Shop Cart Section Begin -->
<section class="shop-cart spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="shop__cart__table">
                    <style>
                        .table {
                            width: 100%;
                            border-collapse: collapse;
                        }
                    
                        .table th,
                        .table td {
                            border: 1px solid #dddddd;
                            text-align: left;
                            padding: 8px;
                        }
                    
                        .table th {
                            background-color: #f2f2f2;
                        }
                    
                        .order__product {
                            display: flex;
                            align-items: center;
                            gap: 10px;
                        }
                    
                        .order__product img {
                            width: 60px;
                            height: 60px;
                            object-fit: cover;
                            border-radius: 5px;
                        }
                    </style>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Order Date</th>
                                <th>Total Amount</th>
                                <th>Products</th>
                                <th>Details</th>
                            </tr>
                        </thead>
                    
                        <tbody>
                            <% if (order && order.length > 0) { %>
                                <% order.forEach((orderItem) => { %>
                                    <tr class="tableContainer" data-id="<%= orderItem._id %>">
                                        <td class="order__item__date">
                                            <%= orderItem.orderDate.toLocaleDateString('en-IN', { year: 'numeric', month: 'short', day: 'numeric' }) %>
                                        </td>
                    
                                        <td class="order__item__total">
                                            &#8377;<%= orderItem.totalprice %>
                                        </td>
                                        <td class="order__item__products">
                                            <% orderItem.products.forEach((product) => { %>
                                                <div class="order__product">
                                                    <img src="/uploadProduct/<%= product.productId.image[0] %>" alt="<%= product.productId.productname %>">
                                                    <div class="order__product__title">
                                                        <h6><%= product.productId.productname %></h6>
                                                        <p>Quantity: <%= product.quantity %></p>
                                                        <p>&#8377;<%= product.price %></p>
                                                    </div>
                                                </div>
                                            <% }) %>
                                        </td>
                                        <td>
                                            <a href="/orderdetail/<%= orderItem._id %>" class="btn btn-primary bg-dark">Details</a>
                                        </td>
                                    </tr>
                                <% }) %>
                            <% } %>
                        </tbody>
                    
                    </table>
                </div>
            </div>
        </div>
        <div class="pagination">
            <% for (let i = 1; i <= totalPages; i++) { %>
                <a href="?page=<%= i %>" class="btn-pagination<%= i === currentPage ? ' current-page' : '' %>" ><%= i %></a>
            <% } %>
        </div>
        
</section>

<!-- Shop Cart Section End -->

<!-- Footer Section Begin -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-6 col-sm-7">
                <div class="footer__about">
                    <div class="footer__logo">
                        <a href="./index.html"><img src="img/logo.png" alt=""></a>
                    </div>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt
                        cilisis.</p>
                    <div class="footer__payment">
                        <a href="#"><img src="asset/img/payment/payment-1.png" alt=""></a>
                        <a href="#"><img src="asset/img/payment/payment-2.png" alt=""></a>
                        <a href="#"><img src="asset/img/payment/payment-3.png" alt=""></a>
                        <a href="#"><img src="asset/img/payment/payment-4.png" alt=""></a>
                        <a href="#"><img src="asset/img/payment/payment-5.png" alt=""></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-5">
                <div class "footer__widget">
                    <h6>Quick links</h6>
                    <ul>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Blogs</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-4">
                <div class="footer__widget">
                    <h6>Account</h6>
                    <ul>
                        <li><a href="#">My Account</a></li>
                        <li><a href="#">Orders Tracking</a></li>
                        <li><a href="#">Checkout</a></li>
                        <li><a href="#">Wishlist</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4 col-md-8 col-sm-8">
                <div class="footer__newslatter">
                    <h6>NEWSLETTER</h6>
                    <form action="#">
                        <input type="text" placeholder="Email">
                        <button type="submit" class="site-btn">Subscribe</button>
                    </form>
                    <div class="footer__social">
                        <a href="#"><i class="fa fa-facebook"></i></a>
                        <a href="#"><i class="fa fa-twitter"></i></a>
                        <a href="#"><i class="fa fa-youtube-play"></i></a>
                        <a href="#"><i class="fa fa-instagram"></i></a>
                        <a href="#"><i class="fa fa-pinterest"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                <div class="footer__copyright__text">
                    <p>Copyright &copy; <script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a></p>
                </div>
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </div>
        </div>
    </div>
</footer>
<!-- Footer Section End -->

<!-- Search Begin -->
<div class="search-model">
    <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-switch">+</div>
        <form class="search-model-form">
            <input type="text" id="search-input" placeholder="Search here.....">
        </form>
    </div>
</div>


<!-- Js Plugins -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="asset/js/jquery-3.3.1.min.js"></script>
<script src="asset/js/bootstrap.min.js"></script>
<script src="asset/js/jquery.magnific-popup.min.js"></script>
<script src="asset/js/jquery-ui.min.js"></script>
<script src="asset/js/mixitup.min.js"></script>
<script src="asset/js/jquery.countdown.min.js"></script>
<script src="asset/js/jquery.slicknav.js"></script>
<script src="asset/js/owl.carousel.min.js"></script>
<script src="asset/js/jquery.nicescroll.min.js"></script>
<script src="asset/js/main.js"></script>
<script src="/js/addtocart.js"></script>
<script src="/js/cartQuantity.js"></script>
<script src="/js/removecart.js"></script>
</body>

</html>